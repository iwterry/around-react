{"version":3,"sources":["contexts/CurrentUserContext.js","images/header-vector.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/Popup.js","components/ImagePopup.js","utils/utils.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmationPromptPopup.js","utils/api.js","images/profile-avatar.jpg","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","Header","props","className","src","logo","alt","Card","card","onCardSelect","onCardLike","onCardDelete","currentUser","useContext","numLikes","likes","length","isCurrentUserTheOwnerOfCard","owner","_id","isCardLikedByCurrentUser","some","someUser","deleteBtnClassName","likeBtnClassName","type","aria-label","onClick","link","name","Main","onEditAvatar","onAddPlace","onEditProfile","cards","avatar","about","map","Footer","Popup","children","isOpen","onClose","additionalCssClassesStr","overlayRef","useRef","ref","target","current","ImagePopup","logErrors","err","console","log","getInputErrors","errors","inputElement","errs","validity","valid","validationMessage","getInputFieldErrorClassName","fieldErrors","fieldName","isErrorShown","inputErrorBlockElement","PopupWithForm","title","onSubmit","isSubmitBtnDisabled","submitBtnText","submitBtnClassName","noValidate","disabled","EditProfilePopup","onUpdateUser","isUpdatingProfile","useState","setName","description","setDescription","setErrors","setIsSubmitBtnDisabled","fieldNames","nameFieldErrorClassName","descriptionFieldErrorClassName","checkIfSubmitBtnShouldBeDisabled","hasInvalidInput","handleInputChange","value","handleBlur","useEffect","evt","preventDefault","placeholder","minLength","maxLength","onChange","onBlur","required","EditAvatarPopup","onUpdateAvatar","isUpdatingAvatar","error","setError","avatarInputRef","createRef","profileAvatarFieldName","avatarFieldErrorClassName","handleInputValidation","avatarInputElement","AddPlacePopup","isCreatingPlace","titleInputRef","linkInputRef","titleFieldErrorClassName","linkFieldErrorClassName","ConfirmationPromptPopup","onConfirmation","isDeletingAfterConfirming","api","headers","this","_baseUrl","_headers","_fetchData","relativePathFromBase","method","additionalHeaderProps","body","JSON","stringify","cardId","avatarLink","isLiking","init","url","fetch","then","res","ok","json","Promise","reject","status","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","defaultAvatar","setCurrentUser","setCards","idOfCardToBeDeleted","setIdOfCardToBeDeleted","setIsUpdatingAvatar","setIsUpdatingProfile","setIsCreatingPlace","setIsDeletingAfterConfirming","closeAllPopups","handleClosingAllPopupsUsingEscKey","key","document","addEventListener","removeEventListener","getUserProfile","catch","getInitialCards","Provider","id","cardName","cardLink","clickedCardId","isClickedCardLikedAlreadyByUser","updateCardLikes","updatedCard","updatedCards","updateUserProfile","updatedUser","finally","createCard","newCard","deleteCard","data","filter","aCard","updateUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2cbae051.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext;","export default __webpack_public_path__ + \"static/media/header-vector.70737bb4.svg\";","import React from 'react';\r\n\r\nimport logo from '../images/header-vector.svg';\r\n\r\nfunction Header(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"Around The U.S.\" className=\"header__vector\" />\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n\r\n","import React from 'react';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const { card, onCardSelect, onCardLike, onCardDelete } = props;\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const numLikes = card.likes.length;\r\n  const isCurrentUserTheOwnerOfCard = card.owner._id === currentUser._id;\r\n  const isCardLikedByCurrentUser = card.likes.some((someUser) => someUser._id === currentUser._id);\r\n\r\n  const deleteBtnClassName = 'location__delete-btn' + \r\n    (isCurrentUserTheOwnerOfCard ? ' location__delete-btn_active' : '');\r\n  const likeBtnClassName = 'location__like-btn' +\r\n    (isCardLikedByCurrentUser ? ' location__like-btn_active' : '');\r\n\r\n\r\n  function handleCardImageClick() {\r\n    onCardSelect(card._id, card.name, card.link);\r\n  }\r\n\r\n  function handleLikeBtnClick() {\r\n    onCardLike(card._id, isCardLikedByCurrentUser);\r\n  }\r\n\r\n  function handleDeleteBtnClick() {\r\n    onCardDelete(card._id)\r\n  }\r\n  \r\n\r\n  return (\r\n    <li className=\"location\">\r\n      <button \r\n        type=\"button\"\r\n        aria-label=\"Delete\"\r\n        className={deleteBtnClassName}\r\n        onClick={handleDeleteBtnClick}\r\n      ></button>\r\n      <img\r\n        src={card.link} \r\n        alt={card.name} \r\n        className=\"location__image\" \r\n        onClick={handleCardImageClick}\r\n      />\r\n      <div className=\"location__content-wrapper\">\r\n        <h2 className=\"location__name\">{card.name}</h2>\r\n        <div className=\"location__likes-wrapper\">\r\n          <button \r\n            type=\"button\" \r\n            aria-label=\"Like\" \r\n            className={likeBtnClassName}\r\n            onClick={handleLikeBtnClick}\r\n          ></button>\r\n          <p className=\"location__num-likes\">{numLikes}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\r\n\r\nimport Card from './Card.js';\r\n\r\nfunction Main(props) {\r\n  const { \r\n    onEditAvatar, \r\n    onAddPlace, \r\n    onEditProfile, \r\n    onCardSelect, \r\n    onCardLike, \r\n    onCardDelete, \r\n    cards \r\n  } = props;\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"main-content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-wrapper\">\r\n          <img src={currentUser.avatar} alt=\"profile avatar\" className=\"profile__avatar\" />\r\n          <div className=\"profile__avatar-overlay\" onClick={onEditAvatar}></div>\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n          <button type=\"button\" aria-label=\"Edit\" className=\"profile__edit-btn\" onClick={onEditProfile}></button>\r\n          <p className=\"profile__self-description\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" aria-label=\"Add location\" className=\"profile__add-btn\" onClick={onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"locations\">\r\n        <ul className=\"locations__collection\">\r\n        {cards.map(({ name, link, likes, _id, owner }) => { \r\n          return (\r\n            <Card\r\n              key={_id}\r\n              card={{ name, link, likes, _id, owner }}\r\n              onCardSelect={onCardSelect}\r\n              onCardLike={onCardLike}\r\n              onCardDelete={onCardDelete} \r\n            />\r\n          );\r\n        })}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer(props) {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">\r\n        &copy; 2020 Around The U.S.\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction Popup(props) {\r\n  const { name, children, isOpen, onClose, additionalCssClassesStr='' } = props;\r\n\r\n  const overlayRef = React.useRef();\r\n\r\n  function handleClick({ target }) { \r\n    // closing popup by clicking on just the overlay and not its contents\r\n   if(target === overlayRef.current) onClose();\r\n\r\n    // Chose to use refs to access the DOM element directly,\r\n    // but could also rely on CSS class '.overlay' instead.\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={`overlay ${additionalCssClassesStr} ${isOpen ? 'overlay_opened' : ''}`} \r\n      ref={overlayRef} \r\n      onClick={handleClick}\r\n    >\r\n      <div className=\"overlay__wrapper\">\r\n        <button\r\n          type=\"button\"\r\n          aria-label=\"Close\"\r\n          className={`overlay__close-btn overlay__close-btn_type_${name}`}\r\n          onClick={onClose}\r\n        >\r\n        </button>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Popup;","import React from 'react';\r\nimport Popup from './Popup';\r\n\r\nfunction ImagePopup(props) {\r\n  const { card, onClose } = props;\r\n\r\n  return (\r\n    <Popup \r\n      name=\"image-popup\" \r\n      isOpen={card._id != null} \r\n      onClose={onClose} \r\n      additionalCssClassesStr=\"overlay_dark\"\r\n    >\r\n      <figure className=\"image-popup\">\r\n        <img src={card.link} alt={card.name} className=\"image-popup__image\" />\r\n        <figcaption className=\"image-popup__title\">{card.name}</figcaption>\r\n      </figure>\r\n    </Popup>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","export function logErrors(err) {\r\n  console.log(`Error: ${err}`);\r\n}\r\n\r\nexport function getInputErrors(errors, inputElement) {\r\n  const errs = { ...errors };\r\n\r\n  if (!inputElement.validity.valid) {\r\n    errs[inputElement.name] = inputElement.validationMessage;\r\n  } else {\r\n    delete errs[inputElement.name];\r\n  }\r\n  return errs;\r\n}\r\n\r\nexport function getInputFieldErrorClassName(fieldErrors, fieldName, isErrorShown) {\r\n  const inputErrorBlockElement = 'project-form__input-error';\r\n  \r\n  const fieldErrorClassName = inputErrorBlockElement +\r\n    ` ${inputErrorBlockElement}_field_${fieldName}` +\r\n    (fieldErrors[fieldName] != null && isErrorShown ? ` ${inputErrorBlockElement}_active` : '');\r\n\r\n  return fieldErrorClassName;\r\n}\r\n","import React from 'react';\r\nimport Popup from './Popup';\r\n\r\nfunction PopupWithForm(props) {\r\n  const { \r\n    name, title, children, isOpen, onClose, \r\n    onSubmit, isSubmitBtnDisabled, submitBtnText\r\n  } = props;\r\n\r\n  const submitBtnClassName = `project-form__submit-btn project-form__submit-btn_type_${name}` + \r\n    (isSubmitBtnDisabled ? ' project-form__submit-btn_disabled' : '');\r\n\r\n  return (\r\n    <Popup name={name} isOpen={isOpen} onClose={onClose}>\r\n      <form \r\n        name={name} \r\n        className={`project-form project-form_type_${name}`} \r\n        onSubmit={onSubmit} \r\n        noValidate\r\n      > \r\n        <h3 className={`project-form__title project-form__title_type_${name}`}>\r\n          {title}\r\n        </h3>\r\n        {children}\r\n        <button type=\"submit\" className={submitBtnClassName} disabled={isSubmitBtnDisabled}>\r\n          {submitBtnText || 'Submit'}\r\n        </button>\r\n      </form>\r\n    </Popup>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\n\r\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\r\nimport { getInputErrors, getInputFieldErrorClassName } from '../utils/utils.js';\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction EditProfilePopup(props) {\r\n  const { isOpen, onClose, onUpdateUser, isUpdatingProfile } = props;\r\n\r\n  const [ name, setName ] = React.useState('');\r\n  const [ description, setDescription ] = React.useState('');\r\n  const [ errors, setErrors ] = React.useState({});\r\n  const [ isSubmitBtnDisabled, setIsSubmitBtnDisabled ] = React.useState(false);\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const fieldNames = {\r\n    profileName: 'profile-name',\r\n    profileDescription: 'profile-description'\r\n  }\r\n  const nameFieldErrorClassName = getInputFieldErrorClassName(\r\n    errors, \r\n    fieldNames.profileName, \r\n    isOpen\r\n  );\r\n  const descriptionFieldErrorClassName = getInputFieldErrorClassName(\r\n    errors,\r\n    fieldNames.profileDescription, \r\n    isOpen\r\n  );\r\n\r\n  const PROFILE_NAME_MAX_LENGTH = 40;\r\n  const PROFILE_NAME_MIN_LENGTH = 2;\r\n  const PROFILE_DESCRIPTION_MAX_LENGTH = 200;\r\n  const PROFILE_DESCRIPTION_MIN_LENGTH = 2;\r\n\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  React.useEffect(() => {\r\n    checkIfSubmitBtnShouldBeDisabled();\r\n  }, [name, description, isUpdatingProfile, isOpen]);\r\n\r\n\r\n  function checkIfSubmitBtnShouldBeDisabled() {\r\n    const hasInvalidInput = (\r\n      name.length < PROFILE_NAME_MIN_LENGTH ||\r\n      name.length > PROFILE_NAME_MAX_LENGTH ||\r\n      description.length < PROFILE_NAME_MIN_LENGTH ||\r\n      description.length > PROFILE_DESCRIPTION_MAX_LENGTH\r\n    );\r\n\r\n    setIsSubmitBtnDisabled(isUpdatingProfile || hasInvalidInput || !isOpen);\r\n  }\r\n\r\n  function handleInputChange({ target }) {\r\n    switch(target.name) {\r\n      case fieldNames.profileName:\r\n        setName(target.value);\r\n        break;\r\n      case fieldNames.profileDescription:\r\n        setDescription(target.value);\r\n        break;\r\n    }\r\n\r\n    setErrors(getInputErrors(errors, target));\r\n  }\r\n\r\n  function handleBlur({ target }) {\r\n    setErrors(getInputErrors(errors, target));\r\n    checkIfSubmitBtnShouldBeDisabled();\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateUser(name, description);\r\n  }\r\n  \r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile-edit\" \r\n      title=\"Edit profile\" \r\n      isOpen={isOpen} \r\n      onClose={onClose} \r\n      onSubmit={handleSubmit} \r\n      isSubmitBtnDisabled={isSubmitBtnDisabled}\r\n      submitBtnText={isUpdatingProfile ? 'Saving' : 'Save'}\r\n    >\r\n      <div className=\"project-form__field-wrapper project-form__field-wrapper_form_profile-edit\">\r\n        <input \r\n          type=\"text\"\r\n          aria-label=\"Name\"\r\n          name={fieldNames.profileName}\r\n          className={\"project-form__input project-form__input_type_profile-edit-field\"}\r\n          placeholder=\"Name\"\r\n          minLength={PROFILE_NAME_MIN_LENGTH}\r\n          maxLength={PROFILE_NAME_MAX_LENGTH}\r\n          value={name}\r\n          onChange={handleInputChange}\r\n          onBlur={handleBlur}\r\n          required\r\n        />\r\n        <p className={nameFieldErrorClassName}>{errors[fieldNames.profileName]}</p>\r\n      </div>\r\n      <div className=\"project-form__field-wrapper project-form__field-wrapper_form_profile-edit\">\r\n        <input\r\n          type=\"text\"\r\n          aria-label=\"About me\"\r\n          name={fieldNames.profileDescription}\r\n          className=\"project-form__input project-form__input_type_profile-edit-field\"\r\n          placeholder=\"About me\"\r\n          minLength={PROFILE_DESCRIPTION_MIN_LENGTH}\r\n          maxLength={PROFILE_DESCRIPTION_MAX_LENGTH}\r\n          value={description}\r\n          onChange={handleInputChange}\r\n          onBlur={handleBlur}\r\n          required\r\n        />\r\n        <p className={descriptionFieldErrorClassName}>{errors[fieldNames.profileDescription]}</p>\r\n      </div>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nimport { getInputErrors, getInputFieldErrorClassName } from '../utils/utils';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const { isOpen, onClose, onUpdateAvatar, isUpdatingAvatar } = props;\r\n  \r\n  const [error, setError] = React.useState({});\r\n  const [ isSubmitBtnDisabled, setIsSubmitBtnDisabled ] = React.useState(true);\r\n\r\n  const avatarInputRef = React.createRef();\r\n\r\n  const profileAvatarFieldName = 'profile-avatar';\r\n  const avatarFieldErrorClassName = getInputFieldErrorClassName(\r\n    error, \r\n    profileAvatarFieldName, \r\n    isOpen\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    checkIfSubmitBtnShouldBeDisabled();\r\n  }, [isUpdatingAvatar, isOpen]);\r\n\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    const avatarInputElement = avatarInputRef.current;\r\n    onUpdateAvatar(avatarInputElement.value);\r\n\r\n    avatarInputElement.value = '';\r\n  }\r\n\r\n  function checkIfSubmitBtnShouldBeDisabled() {\r\n    const hasInvalidInput = !avatarInputRef.current.validity.valid;\r\n\r\n    setIsSubmitBtnDisabled(isUpdatingAvatar || hasInvalidInput || !isOpen);\r\n  }\r\n\r\n  function handleInputValidation({ target: inputElement }) {\r\n    setError(getInputErrors(error, inputElement));\r\n    checkIfSubmitBtnShouldBeDisabled();\r\n  }\r\n  \r\n      \r\n  return (\r\n    <PopupWithForm \r\n      name=\"profile-img-change\" \r\n      title=\"Change profile picture\" \r\n      isOpen={isOpen} \r\n      onClose={onClose} \r\n      onSubmit={handleSubmit}\r\n      isSubmitBtnDisabled={isSubmitBtnDisabled}\r\n      submitBtnText={isUpdatingAvatar ? 'Saving' : 'Save'}\r\n    >\r\n      <div className=\"project-form__field-wrapper project-form__field-wrapper_form_profile-img-change\">\r\n        <input\r\n          type=\"url\"\r\n          aria-label=\"Avatar link\"\r\n          name={profileAvatarFieldName}\r\n          className=\"project-form__input project-form__input_type_profile-img-change-field\"\r\n          placeholder=\"Avatar link\"\r\n          ref={avatarInputRef}\r\n          onChange={handleInputValidation}\r\n          onBlur={handleInputValidation}\r\n          required\r\n        />\r\n        <p className={avatarFieldErrorClassName}>{error[profileAvatarFieldName]}</p>\r\n      </div>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport { getInputErrors, getInputFieldErrorClassName } from '../utils/utils';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const { isOpen, onClose, onAddPlace, isCreatingPlace } = props;\r\n\r\n  const [ errors, setErrors ] = React.useState({});\r\n  const [ isSubmitBtnDisabled, setIsSubmitBtnDisabled ] = React.useState(true);\r\n\r\n  const titleInputRef = React.useRef({value: ''});\r\n  const linkInputRef = React.useRef({value: ''});\r\n\r\n  const fieldNames = {\r\n    placeTitle: 'location-title',\r\n    placeLink: 'location-link'\r\n  }\r\n  const titleFieldErrorClassName = getInputFieldErrorClassName(\r\n    errors, \r\n    fieldNames.placeTitle, \r\n    isOpen\r\n  );\r\n  const linkFieldErrorClassName = getInputFieldErrorClassName(\r\n    errors, \r\n    fieldNames.placeLink, \r\n    isOpen\r\n  );\r\n\r\n\r\n  React.useEffect(() => {\r\n    checkIfSubmitBtnShouldBeDisabled();\r\n  }, [isCreatingPlace, isOpen]);\r\n\r\n  function checkIfSubmitBtnShouldBeDisabled() {\r\n    const hasInvalidInput = (  \r\n      !titleInputRef.current.validity.valid ||\r\n      !linkInputRef.current.validity.valid\r\n    );\r\n\r\n    setIsSubmitBtnDisabled(isCreatingPlace || hasInvalidInput || !isOpen);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    onAddPlace(titleInputRef.current.value, linkInputRef.current.value);\r\n\r\n    titleInputRef.current.value = '';\r\n    linkInputRef.current.value = '';\r\n  }\r\n\r\n  function handleInputValidation({ target }) {\r\n    setErrors(getInputErrors(errors, target));\r\n    checkIfSubmitBtnShouldBeDisabled();\r\n  }\r\n  \r\n\r\n  return (\r\n    <PopupWithForm \r\n      name=\"location-create\" \r\n      title=\"New place\" \r\n      isOpen={isOpen} \r\n      onClose={onClose} \r\n      onSubmit={handleSubmit} \r\n      isSubmitBtnDisabled={isSubmitBtnDisabled}\r\n      submitBtnText={isCreatingPlace ? 'Saving' : 'Save'}\r\n    >\r\n      <div className=\"project-form__field-wrapper project-form__field-wrapper_form_location-create\">\r\n        <input \r\n          type=\"text\"\r\n          aria-label=\"Title\"\r\n          name={fieldNames.placeTitle}\r\n          className=\"project-form__input project-form__input_type_location-create-field\"\r\n          placeholder=\"Title\"\r\n          minLength=\"2\"\r\n          maxLength=\"30\"\r\n          ref={titleInputRef}\r\n          onChange={handleInputValidation}\r\n          onBlur={handleInputValidation}\r\n          required\r\n        />\r\n        <p className={titleFieldErrorClassName}>{errors[fieldNames.placeTitle]}</p>\r\n      </div>\r\n      <div className=\"project-form__field-wrapper project-form__field-wrapper_form_location-create\">\r\n        <input\r\n          type=\"url\"\r\n          aria-label=\"Image link\"\r\n          name={fieldNames.placeLink}\r\n          className=\"project-form__input project-form__input_type_location-create-field\"\r\n          placeholder=\"Image link\"\r\n          ref={linkInputRef}\r\n          onChange={handleInputValidation}\r\n          onBlur={handleInputValidation}\r\n          required\r\n        />\r\n        <p className={linkFieldErrorClassName}>{errors[fieldNames.placeLink]}</p>\r\n      </div>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction ConfirmationPromptPopup(props) {\r\n  const { isOpen, onClose, onConfirmation, isDeletingAfterConfirming } = props;\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    onConfirmation();\r\n  }\r\n  return (\r\n    <PopupWithForm \r\n      name=\"confirmation-prompt\" \r\n      title=\"Are you sure?\" \r\n      isOpen={isOpen} \r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isSubmitBtnDisabled={isDeletingAfterConfirming || !isOpen}\r\n      submitBtnText={\"Yes\"}\r\n    />\r\n  );\r\n}\r\n\r\nexport default ConfirmationPromptPopup;","class Api {\r\n  constructor({ headers }) {\r\n    this._baseUrl = 'https://around.nomoreparties.co/v1/group-8';\r\n    this._headers = headers;\r\n  }\r\n\r\n  getInitialCards() {\r\n    return this._fetchData({ relativePathFromBase: 'cards' });\r\n  }\r\n\r\n  getUserProfile() {\r\n    return this._fetchData({ relativePathFromBase: 'users/me' });\r\n  }\r\n\r\n  createCard(name, link) {\r\n    return this._fetchData({ \r\n      relativePathFromBase: 'cards',\r\n      method: 'POST',\r\n      additionalHeaderProps: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ name, link })\r\n    });\r\n  }\r\n\r\n  updateUserProfile(name, about) {\r\n    return this._fetchData({ \r\n      relativePathFromBase: 'users/me',\r\n      method: 'PATCH',\r\n      additionalHeaderProps: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ name, about })\r\n    });\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return this._fetchData({ \r\n      relativePathFromBase:  `cards/${cardId}`,\r\n      method: 'DELETE'\r\n    });\r\n  }\r\n\r\n  updateUserAvatar(avatarLink) {\r\n    return this._fetchData({ \r\n      relativePathFromBase: 'users/me/avatar',\r\n      method: 'PATCH',\r\n      additionalHeaderProps: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ avatar: avatarLink })\r\n    });\r\n  }\r\n\r\n  updateCardLikes(cardId, isLiking ) {\r\n    return this._fetchData({ \r\n      relativePathFromBase: `cards/likes/${cardId}`,\r\n      method: (isLiking ? 'PUT' : 'DELETE')\r\n    });\r\n  }\r\n  \r\n  _fetchData({ relativePathFromBase, method='GET', additionalHeaderProps={}, body=null}) {\r\n    const init = {\r\n      method,\r\n      headers: {\r\n        ...this._headers,\r\n        ...additionalHeaderProps\r\n      }\r\n    };\r\n\r\n    if(body !== null) {\r\n      init.body = body;\r\n    }\r\n\r\n    const url = `${this._baseUrl}/${relativePathFromBase}`;\r\n\r\n    return fetch(url, init).then((res) => {\r\n      if(res.ok) return res.json();\r\n      else return Promise.reject(res.status);\r\n    });\r\n  }\r\n}\r\n\r\nconst authToken = 'f9c51bc0-ecec-42b1-bdb4-bcfabdba3e4f';\r\n\r\nconst api = new Api({ \r\n  headers: { \r\n    authorization: authToken \r\n  }\r\n});\r\n\r\nexport default api;","export default __webpack_public_path__ + \"static/media/profile-avatar.5a8c9959.jpg\";","import React from 'react';\r\n\r\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\r\n\r\nimport Header from './Header.js';\r\nimport Main from './Main.js';\r\nimport Footer from './Footer.js';\r\nimport ImagePopup from './ImagePopup.js';\r\nimport EditProfilePopup from './EditProfilePopup.js';\r\nimport EditAvatarPopup from './EditAvatarPopup.js';\r\nimport AddPlacePopup from './AddPlacePopup.js';\r\nimport ConfirmationPromptPopup from './ConfirmationPromptPopup.js';\r\n\r\nimport api from '../utils/api.js';\r\nimport { logErrors } from '../utils/utils.js';\r\n\r\nimport defaultAvatar from '../images/profile-avatar.jpg';\r\n\r\nfunction App() {\r\n  const [ isEditProfilePopupOpen, setIsEditProfilePopupOpen ]  = React.useState(false);\r\n  const [ isAddPlacePopupOpen, setIsAddPlacePopupOpen ] = React.useState(false);\r\n  const [ isEditAvatarPopupOpen, setIsEditAvatarPopupOpen ] = React.useState(false);\r\n  const [ selectedCard, setSelectedCard ] = React.useState({ _id: null, link: '#',  name: '' });\r\n  const [ currentUser, setCurrentUser ] = React.useState({\r\n    name: 'Jacques Cousteau',\r\n    about: 'Explorer',\r\n    avatar: defaultAvatar,\r\n    _id: null\r\n  });\r\n  const [ cards, setCards ] = React.useState([]);\r\n  const [ idOfCardToBeDeleted, setIdOfCardToBeDeleted ] = React.useState(null);\r\n  const [ isUpdatingAvatar, setIsUpdatingAvatar ] = React.useState(false);\r\n  const [ isUpdatingProfile, setIsUpdatingProfile ] = React.useState(false);\r\n  const [ isCreatingPlace, setIsCreatingPlace ] = React.useState(false);\r\n  const [ isDeletingAfterConfirming, setIsDeletingAfterConfirming ] = React.useState(false);\r\n\r\n  const isOpen = (\r\n    isEditAvatarPopupOpen || \r\n    isEditProfilePopupOpen || \r\n    isAddPlacePopupOpen || \r\n    idOfCardToBeDeleted || /* for confirmation popup */\r\n    selectedCard._id      /* for image popup */\r\n  );\r\n\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIdOfCardToBeDeleted(null);\r\n    setSelectedCard({ ...selectedCard, _id: null });\r\n  }\r\n\r\n  function handleClosingAllPopupsUsingEscKey(evt) {\r\n    if(evt.key === 'Escape') {\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n\r\n  React.useEffect(() => { // using approach similar to earlier sprints\r\n    if(isOpen) {\r\n      document.addEventListener('keydown', handleClosingAllPopupsUsingEscKey);\r\n    } else {\r\n      document.removeEventListener('keydown', handleClosingAllPopupsUsingEscKey);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  React.useEffect(() => {\r\n    api.getUserProfile()\r\n      .then(({ _id, name, about, avatar }) => setCurrentUser({ _id, name, about, avatar }))\r\n      .catch(logErrors);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    api.getInitialCards()\r\n      .then(setCards)\r\n      .catch(logErrors);\r\n  }, []);\r\n\r\n\r\n  function handleCardLike(clickedCardId, isClickedCardLikedAlreadyByUser) {\r\n    api.updateCardLikes(clickedCardId, !isClickedCardLikedAlreadyByUser)\r\n      .then((updatedCard) => {\r\n        const updatedCards = cards.map((card) => card._id === clickedCardId ? updatedCard : card);\r\n        setCards(updatedCards);\r\n      })\r\n      .catch(logErrors);\r\n  }\r\n\r\n  function handleCardDelete(id) {\r\n    setIdOfCardToBeDeleted(id);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardSelect(cardId, cardName, cardLink) {\r\n    setSelectedCard({\r\n      _id: cardId,\r\n      name: cardName, \r\n      link: cardLink\r\n    });\r\n  }\r\n\r\n  function handleUpdateUser(name, about) {\r\n    setIsUpdatingProfile(true);\r\n    api.updateUserProfile(name, about)\r\n      .then((updatedUser) => setCurrentUser({\r\n        ...currentUser,\r\n        name: updatedUser.name,\r\n        about: updatedUser.about \r\n      }))\r\n      .catch(logErrors)\r\n      .finally(() => {\r\n        closeAllPopups();\r\n        setIsUpdatingProfile(false);\r\n      });\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    setIsUpdatingAvatar(true);\r\n    api.updateUserAvatar(avatar)\r\n      .then((updatedUser) => setCurrentUser({\r\n        ...currentUser,\r\n        avatar: updatedUser.avatar\r\n      }))\r\n      .catch(logErrors)\r\n      .finally(() => {\r\n        closeAllPopups();\r\n        setIsUpdatingAvatar(false);\r\n      });\r\n  }\r\n\r\n  function handleAddPlace(name, link) {\r\n    setIsCreatingPlace(true);\r\n    api.createCard(name, link)\r\n      .then((newCard) => setCards([newCard, ...cards]))\r\n      .catch(logErrors)\r\n      .finally(() => {\r\n        closeAllPopups();\r\n        setIsCreatingPlace(false);\r\n      });\r\n  }\r\n\r\n  function handleConfirmation() {\r\n    setIsDeletingAfterConfirming(true);\r\n    api.deleteCard(idOfCardToBeDeleted)\r\n      .then((data) => {\r\n        console.log('returned:', data);\r\n        const updatedCards = cards.filter((aCard) => aCard._id !== idOfCardToBeDeleted);\r\n        setCards(updatedCards);\r\n      })\r\n      .catch(logErrors)\r\n      .finally(() => {\r\n        closeAllPopups();\r\n        setIsDeletingAfterConfirming(false);\r\n      });\r\n  }\r\n\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header />\r\n        <Main\r\n          onEditAvatar={handleEditAvatarClick}\r\n          onEditProfile={handleEditProfileClick}\r\n          onAddPlace={handleAddPlaceClick}\r\n          onCardDelete={handleCardDelete} \r\n          onCardSelect={handleCardSelect}\r\n          onCardLike={handleCardLike}\r\n          cards={cards}\r\n        />\r\n        <Footer />\r\n        \r\n        <EditProfilePopup \r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups} \r\n          onUpdateUser={handleUpdateUser} \r\n          isUpdatingProfile={isUpdatingProfile} \r\n        />\r\n\r\n        <AddPlacePopup \r\n          isOpen={isAddPlacePopupOpen} \r\n          onClose={closeAllPopups} \r\n          onAddPlace={handleAddPlace} \r\n          isCreatingPlace={isCreatingPlace} \r\n        />\r\n\r\n        <ConfirmationPromptPopup \r\n          isOpen={idOfCardToBeDeleted !== null} \r\n          onClose={closeAllPopups} \r\n          onConfirmation={handleConfirmation} \r\n          isDeletingAfterConfirming={isDeletingAfterConfirming} \r\n        />\r\n          \r\n        <EditAvatarPopup \r\n          isOpen={isEditAvatarPopupOpen} \r\n          onClose={closeAllPopups} \r\n          onUpdateAvatar={handleUpdateAvatar} \r\n          isUpdatingAvatar={isUpdatingAvatar} \r\n        />\r\n\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n/*\r\n  Note:\r\n  - All popups can be closed using close button, ESC key, and clicking on overlay (and not \r\n    its contents)\r\n  - forms operate as follows\r\n    - submit button is disabled when having invalid inputs, submitting, and closing  form popups\r\n    - input errors are shown when inputs are invalid and are hidden when closing the form popups\r\n      and shown when opening\r\n    - when closing form popup, input fields are not reset, but they cleared when \r\n      submitting (except for profile form to update user name and description)\r\n    - text change on submit button to show the user that information is being saved (except\r\n      when deleting cards)\r\n    - when deleting card, the user is asked to confirm first.\r\n*/","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App.js';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}